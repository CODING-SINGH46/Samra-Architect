<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thank You | Samra Architect</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    /* Add to existing styles */
    .invoice-screenshot {
      max-width: 300px;
      margin: 20px auto;
      border: 2px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      background: white;
    }
    
    .share-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    
    .share-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 25px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .whatsapp-share {
      background: #25D366;
      color: white;
    }
    
    .whatsapp-share:hover {
      background: #1da851;
      transform: translateY(-2px);
    }
    
    .email-share {
      background: #ea4335;
      color: white;
    }
    
    .email-share:hover {
      background: #d33426;
      transform: translateY(-2px);
    }
    
    .payment-verified-badge {
      background: #a85858;
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: bold;
    }
    
    .utr-details {
      background: #e8f5e9;
      border-left: 4px solid #28a745;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
    .invoice-card {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
    
  </style>
</head>
<body onload="createConfetti(); loadInvoiceData();">

  <nav class="navbar">
    <div class="nav-container">
      <div class="logo">
        <h2>Samra Architect</h2>
      </div>
      <ul class="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="book.html">Book Another</a></li>
      </ul>
    </div>
  </nav>

  <section class="section">
    <div class="container">
      <div class="thankyou-container">
        <div class="success-icon">
          <i class="fa-solid fa-clock"></i>
        </div>
        
        <h1 class="fade-in">Payment Under Verification!</h1>
        <p class="subtitle">Thank you for your booking. We'll contact you within 24 hours.</p>
        
        <!-- Payment Status -->
        <div class="payment-status">
          <div class="payment-verified-badge">
            <i class="fas fa-check-circle"></i> Payment pending verification
          </div>
          <div class="utr-details">
            <p><strong>UTR Number:</strong> <span id="displayUTR">Loading...</span></p>
            <p><strong>Payment Time:</strong> <span id="displayPaymentTime">Loading...</span></p>
          </div>
        </div>
        
        <!-- Invoice Card -->
        <div class="invoice-header">
          <h2><i class="fas fa-file-invoice"></i> INVOICE</h2>
        </div>
        <div class="invoice-card">
          <i class="fa-solid fa-triangle-exclamation fa-2xl" style="color: rgb(243, 190, 2);"></i>
          <p>Share your invoice with us for faster processing,If you cannot share the invoice,payment verification may take longer.</p>
        </div>
        
        <div class="confirmation-details">
          <div class="detail-card">
            <h3><i class="fas fa-receipt"></i> Invoice & Payment</h3>
            <div class="detail-item">
              <span>Invoice ID:</span>
              <span id="invoiceId" class="invoice-id">INV-001</span>
            </div>
            <div class="detail-item">
              <span>Booking ID:</span>
              <span id="bookingId">SAMRA-001</span>
            </div>
            <div class="detail-item">
              <span>UTR Number:</span>
              <span id="utrNumber" style="font-family: monospace;">123456789012</span>
            </div>
            <div class="detail-item">
              <span>Payment Time:</span>
              <span id="paymentTime">Loading...</span>
            </div>
            <div class="detail-item">
              <span>Service:</span>
              <span id="invoiceService">Online Consultation</span>
            </div>
            <div class="detail-item">
              <span>Amount Paid:</span>
              <span class="price" id="invoiceAmount">‚Çπ999</span>
            </div>
            <div class="detail-item">
              <span>Payment Method:</span>
              <span id="paymentMethod">UPI</span>
            </div>
            <div class="detail-item">
              <span>Status:</span>
              <span class="status success">Verified</span>
            </div>
          </div>
          
          <div class="detail-card">
            <h3><i class="fas fa-user"></i> Client Details</h3>
            <div class="detail-item">
              <span>Name:</span>
              <span id="clientName">John Smith</span>
            </div>
            <div class="detail-item">
              <span>Email:</span>
              <span id="clientEmail">john@example.com</span>
            </div>
            <div class="detail-item">
              <span>Phone:</span>
              <span id="clientPhone">+91 98765 43210</span>
            </div>
            <div class="detail-item">
              <span>Project Location:</span>
              <span id="clientAddress">Mumbai, Maharashtra</span>
            </div>
            <div class="detail-item">
              <span>Project Type:</span>
              <span id="projectType">Residential</span>
            </div>
          </div>
        </div>
        
                
        <!-- Share Instructions -->
        <div class="share-instructions">
          <h4><i class="fas fa-share-alt"></i> Share Your Invoice</h4>
          <p>1. Take a screenshot of the invoice above (or download PDF)</p>
          <p>2. Click WhatsApp to share with our team</p>
          <p>3. Click Email to send invoice to yourself</p>
        </div>
        
        <!-- Action Buttons -->
        <div class="share-buttons">
          <button class="share-btn whatsapp-share" onclick="typeof shareInvoiceWhatsApp === 'function' && shareInvoiceWhatsApp()">
            <i class="fab fa-whatsapp"></i> Share on WhatsApp
          </button>
          <button class="share-btn email-share" onclick="typeof sendInvoiceEmail === 'function' && sendInvoiceEmail()">
            <i class="fas fa-envelope"></i> Email Invoice
          </button>
          <button class="btn btn-primary" onclick="typeof downloadInvoice === 'function' && downloadInvoice()">
            <i class="fas fa-download"></i> Download PDF
          </button>
          <button class="btn btn-secondary" onclick="window.print()">
            <i class="fas fa-print"></i> Print
          </button>
        </div>
        
        <!-- Next Steps Timeline -->
        <div class="next-steps">
          <h3><i class="fas fa-list-check"></i> What Happens Next?</h3>
          <div class="timeline">
            <div class="timeline-step completed">
              <h4>Step 1: Payment Verification</h4>
              <p>Your UPI payment is verified</p>
              <small>Completed</small>
            </div>
            <div class="timeline-step active">
              <h4>Step 2: Team Contact</h4>
              <p>Our architect will contact you on WhatsApp/call</p>
              <small>Within 24 hours</small>
            </div>
            <div class="timeline-step">
              <h4>Step 3: Consultation Scheduling</h4>
              <p>Schedule your consultation session</p>
              <small>Within 2 days</small>
            </div>
            <div class="timeline-step">
              <h4>Step 4: Project Discussion</h4>
              <p>Detailed discussion of your requirements</p>
              <small>Within 3 days</small>
            </div>
          </div>
        </div>
        
        <!-- Contact Information -->
        <div class="contact-support">
          <div class="detail-card">
            <h3><i class="fas fa-headset"></i> Need Immediate Assistance?</h3>
            <p><i class="fab fa-whatsapp"></i> WhatsApp: <strong>+91 6375626274</strong></p>
            <p><i class="fas fa-phone"></i> Call: <strong>+91 6375626274</strong></p>
            <p><i class="fas fa-envelope"></i> Email: <strong>architectsamra@gmail.com</strong></p>
            <p><i class="fas fa-clock"></i> Support Hours: Mon-Sat, 9 AM - 7 PM</p>
            <p><i class="fas fa-exclamation-circle"></i> Mention your Invoice ID in all communications</p>
          </div>
        </div>
        
        <!-- CTA Buttons -->
        <div class="action-buttons">
          <a href="index.html" class="btn">
            <i class="fas fa-home"></i> Back to Home
          </a>
          <a href="book.html" class="btn btn-primary">
            <i class="fas fa-calendar-plus"></i> Book Another Service
          </a>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="footer-bottom">
      <p>¬© 2026 Samra Architect. All rights reserved.</p>
      <p>UPI: samraarchitect@upi | Support: +91 6375626274</p>
    </div>
  </footer>

  <script src="invoice.js"></script>
  <script>
    // Safe element updater
    function setElementText(id, text) {
      const element = document.getElementById(id);
      if (element) {
        element.textContent = text;
      }
    }
    
    // Load invoice data
    function loadInvoiceData() {
      const urlParams = new URLSearchParams(window.location.search);
      const invoiceIdFromUrl = urlParams.get('invoice');
      const utrFromUrl = urlParams.get('utr');
      
      let invoiceData = JSON.parse(localStorage.getItem('currentInvoice')) || {};
      const bookingDetails = JSON.parse(localStorage.getItem('bookingDetails')) || {};
      const paymentVerification = JSON.parse(localStorage.getItem('paymentVerification')) || {};
      
      
      // Populate invoice details
      setElementText('invoiceId', invoiceData.id);
      setElementText('bookingId', invoiceData.bookingId);
      setElementText('invoiceService', invoiceData.service);
      setElementText('invoiceAmount', invoiceData.amount);
      setElementText('paymentMethod', invoiceData.paymentMethod);
      setElementText('utrNumber', invoiceData.utrNumber || "Not provided");
      setElementText('paymentTime', invoiceData.paymentTime || invoiceData.time);
      
      // Populate client details
      setElementText('clientName', invoiceData.client);
      setElementText('clientEmail', invoiceData.email);
      setElementText('clientPhone', invoiceData.phone);
      setElementText('clientAddress', invoiceData.address);
      setElementText('projectType', invoiceData.projectType);
      
      // Populate UTR display
      setElementText('displayUTR', invoiceData.utrNumber || "Not provided");
      setElementText('displayPaymentTime', invoiceData.paymentTime || invoiceData.time);
      
      // Populate screenshot display (these elements may not exist, so safe check is needed)
      setElementText('screenshotInvoiceId', invoiceData.id);
      setElementText('screenshotClientName', invoiceData.client);
      setElementText('screenshotService', invoiceData.service);
      setElementText('screenshotAmount', invoiceData.amount);
      setElementText('screenshotUTR', invoiceData.utrNumber || "Not provided");
      setElementText('screenshotDate', invoiceData.date);
    }
    
    // Share via WhatsApp with specific number
    function shareInvoiceWhatsApp() {
      const invoiceId = document.getElementById('invoiceId').textContent;
      const amount = document.getElementById('invoiceAmount').textContent;
      const service = document.getElementById('invoiceService').textContent;
      const clientName = document.getElementById('clientName').textContent;
      const utrNumber = document.getElementById('utrNumber').textContent;
      
      // WhatsApp number to share with
      const whatsappNumber = "916312544444"; // Remove + and spaces
      
      const text = `‚úÖ Payment Confirmed - Samra Architect\n\n` +
                  `üìã Invoice: ${invoiceId}\n` +
                  `üë§ Client: ${clientName}\n` +
                  `üèóÔ∏è Service: ${service}\n` +
                  `üí∞ Amount: ${amount}\n` +
                  `üî¢ UTR: ${utrNumber}\n\n` +
                  `üìû Please contact for any queries.\n` +
                  `‚è∞ Our team will reach you within 24 hours.`;
      
      // Open WhatsApp with specific number and message
      const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(text)}`;
      window.open(url, '_blank');
    }
    
// Send Invoice Email - Opens default email client
function sendInvoiceEmail() {
  const invoiceId = document.getElementById('invoiceId').textContent.trim();
  const clientName = document.getElementById('clientName').textContent.trim();
  const clientEmail = document.getElementById('clientEmail').textContent.trim();
  const amount = document.getElementById('invoiceAmount').textContent.trim();
  const service = document.getElementById('invoiceService').textContent.trim();
  const utrNumber = document.getElementById('utrNumber').textContent.trim();

  // Email details
  const toEmail = "samraarchitect@gmail.com"; // Samra Architect
  const subject = `Invoice Payment Confirmation - ${invoiceId}`;

  const body =
`Dear Samra Architect Team,

This is ${clientName} (${clientEmail}).

Please find my invoice payment details below:

Invoice ID : ${invoiceId}
Service    : ${service}
Amount     : ${amount}
UTR Number : ${utrNumber}
Date       : ${new Date().toLocaleDateString('en-IN')}

Kindly confirm receipt of payment.

Thank you.

Best regards,
${clientName}
${clientEmail}`;

  // Open default email client
  const mailtoLink =
    `mailto:${toEmail}` +
    `?subject=${encodeURIComponent(subject)}` +
    `&body=${encodeURIComponent(body)}`;

  window.location.href = mailtoLink;
}
    
    
    // Confetti animation
    function createConfetti() {
      const colors = ['#ff6b6b', '#4ecdc4', '#ffe66d', '#ff8e53', '#c9a14a'];
      const container = document.body;
      
      for (let i = 0; i < 150; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.top = '-20px';
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.width = Math.random() * 15 + 5 + 'px';
        confetti.style.height = Math.random() * 15 + 5 + 'px';
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        container.appendChild(confetti);
        
        const animation = confetti.animate([
          { transform: `translate(0, 0) rotate(0deg)`, opacity: 1 },
          { transform: `translate(${Math.random() * 100 - 50}px, 100vh) rotate(${Math.random() * 720}deg)`, opacity: 0 }
        ], {
          duration: 2000 + Math.random() * 3000,
          easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
        });
        
        animation.onfinish = () => confetti.remove();
      }
    }
  </script>
</body>
</html>
